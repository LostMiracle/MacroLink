<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>MacroLink Dashboard</title>
    <link rel="stylesheet" href="/static/styles/min/dashboard.min.css" />
  </head>
  <body>
    <div class="menu row">
      <h1>Device Dashboard</h1>
      <a href="/">
        <div>Macro Panel</div>
      </a>
    </div>
    <div class="container">
      <div class="dashboard" id="green-dashboard">
        <div class="row title" id="green-title">
          <h2 style="color: greenyellow">Green MacroLink</h2>
          <div class="row">
            <div class="status" id="green-status">Searching....</div>
            <button class="restart" id="green-restart">ðŸ”„ Reboot</button>
          </div>
        </div>
        <div id="green-error"></div>
        <div class="info" id="green-info">
          <div class="row">
            <div class="card">
              <div class="status-field">
                <strong>Safe Mode:</strong> <span id="green-safe_mode">â€“</span>
              </div>
              <div class="status-field">
                <strong>Filesystem:</strong>
                <span id="green-filesystem">â€“</span>
              </div>
              <div class="status-field">
                <strong>USB Mode:</strong> <span id="green-usb_mode">â€“</span>
              </div>
              <div class="status-field">
                <strong>Version:</strong> <span id="green-version">â€“</span>
              </div>
            </div>
            <div class="card">
              <div class="status-field">
                <strong>RSSI:</strong> <span id="green-rssi">â€“</span>
              </div>
              <div class="status-field">
                <strong>IP:</strong> <span id="green-ip">â€“</span>
              </div>
              <div class="status-field">
                <strong>MAC:</strong> <span id="green-mac">â€“</span>
              </div>
              <div class="status-field">
                <strong>HTTP Requests:</strong>
                <span id="green-http_requests">â€“</span>
              </div>
            </div>
            <div class="card">
              <div class="status-field">
                <strong>CPU Temp:</strong> <span id="green-cpu_temp">â€“</span> Â°C
              </div>
              <div class="status-field">
                <strong>Uptime:</strong> <span id="green-uptime">â€“</span>
              </div>
              <div class="status-field">
                <strong>Last Recovery:</strong> <span id="green-lastrecovery">â€“</span>
              </div>
            </div>
            <div class="card">
              <div class="status-field">
                <strong>Memory Used:</strong>
                <span id="green-memory_used">â€“</span>
              </div>
              <div class="status-field">
                <strong>Memory Free:</strong>
                <span id="green-memory_free">â€“</span>
              </div>
              <div class="status-field">
                <strong>Memory % Used:</strong>
                <span id="green-memory_percent">â€“</span>%
              </div>
            </div>
          </div>
          <div class="card">
            <div class="status-field">
              <strong>Last Macro:</strong>
              <span id="green-last_macro_ts">â€“</span>
            </div>
            <div class="status-field">
              <strong>Macros:</strong>
              <ul id="green-macros"></ul>
            </div>
          </div>
        </div>
      </div>
      <!-- Start of blue unit dashboard -->
      <div class="dashboard" id="blue-dashboard">
        <div class="row title" id="blue-title">
          <h2 style="color: lightskyblue">Blue MacroLink</h2>
          <di class="row">
            <div class="status" id="blue-status">Searching...</div>
            <button class="restart" id="blue-restart">ðŸ”„ Reboot</button>
          </di>
        </div>
        <div id="blue-error"></div>
        <div class="info" id="blue-info">
          <div class="row">
            <div class="card">
              <div class="status-field">
                <strong>Safe Mode:</strong> <span id="blue-safe_mode">â€“</span>
              </div>
              <div class="status-field">
                <strong>Filesystem:</strong> <span id="blue-filesystem">â€“</span>
              </div>
              <div class="status-field">
                <strong>USB Mode:</strong> <span id="blue-usb_mode">â€“</span>
              </div>
              <div class="status-field">
                <strong>Version:</strong> <span id="blue-version">â€“</span>
              </div>
            </div>
            <div class="card">
              <div class="status-field">
                <strong>RSSI:</strong> <span id="blue-rssi">â€“</span>
              </div>
              <div class="status-field">
                <strong>IP:</strong> <span id="blue-ip">â€“</span>
              </div>
              <div class="status-field">
                <strong>MAC:</strong> <span id="blue-mac">â€“</span>
              </div>
              <div class="status-field">
                <strong>HTTP Requests:</strong>
                <span id="blue-http_requests">â€“</span>
              </div>
            </div>
            <div class="card">
              <div class="status-field">
                <strong>CPU Temp:</strong> <span id="blue-cpu_temp">â€“</span> Â°C
              </div>
              <div class="status-field">
                <strong>Uptime:</strong> <span id="blue-uptime">â€“</span>
              </div>
              <div class="status-field">
                <strong>Last Recovery:</strong> <span id="blue-lastrecovery">â€“</span>
              </div>
            </div>
            <div class="card">
              <div class="status-field">
                <strong>Memory Used:</strong>
                <span id="blue-memory_used">â€“</span>
              </div>
              <div class="status-field">
                <strong>Memory Free:</strong>
                <span id="blue-memory_free">â€“</span>
              </div>
              <div class="status-field">
                <strong>Memory % Used:</strong>
                <span id="blue-memory_percent">â€“</span>%
              </div>
            </div>
          </div>
          <div class="card">
            <div class="status-field">
              <strong>Last Macro:</strong> <span id="blue-last_macro_ts">â€“</span>
            </div>
            <div class="status-field">
              <div class="margin-top-1rem margin-bottom-halfrem">
                <strong>Macros:</strong>
              </div>
              <ul id="blue-macros"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div id="confirmModal" class="modal">
      <div class="modal-content">
        <p id="confirmMessage"></p>
        <div class="modal-buttons">
          <button id="confirmNo">Cancel</button>
          <button id="confirmYes">Confirm</button>
        </div>
      </div>
    </div>
    <div class="background-layer grid"></div>
    <div class="background-layer logo"></div>
    <div class="particles" id="tsparticles"></div>
    <script src="/static/js/min/tsparticles.bundle.min.js"></script>
    <script>
      (async () => {
        await loadAll(tsParticles);

        await tsParticles.load({
          id: "tsparticles",
          options: {
            /* options */
            fpsLimit: 20,
            fullScreen: { enable: true, zIndex: -1 },
            retina_detect: true,
            particles: {
              number: { value: 80 },
              size: { value: 1 },
              color: { value: "#ffffff" },
              links: {
                enable: true,
                color: "#ffff9c",
                distance: 110,
                opacity: 0.3,
                width: 1,
              },
              move: {
                enable: true,
                speed: 0.4,
              },
            },
          },
        });
      })();
    </script>
    <script>
      document.getElementById("green-title").addEventListener("click", (e) => {
        // prevent toggle if a button inside was clicked
        if (e.target.closest("button")) return;
        const greenInfo = document.getElementById("green-info");
        greenInfo.classList.toggle("expanded");
      });
      document.getElementById("blue-title").addEventListener("click", (e) => {
        if (e.target.closest("button")) return;
        const blueInfo = document.getElementById("blue-info");
        blueInfo.classList.toggle("expanded");
      });
    </script>
    <script>
      const STATIC_MACROS = {{ static_macros|tojson }};
      const DYNAMIC_MACROS = {{ dynamic_macros|tojson }};
      const NORMALIZED_MACROS = {{ normalized_macros | tojson }};
    </script>
    <script src="/static/js/min/dashboard.min.js"></script>
  </body>
</html>
